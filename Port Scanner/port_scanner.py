import socket

s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
s.settimeout(5)

def port_scanner(ip, port):
    try:
        s.connect((ip, port))
        return "The port is open"
    except:
        return "The port is closed"
    

def main():
    print("""Port Scanner
1. Analize multiple ports
2. Analize a single port""")

    option = input("> ")

    ip = input("Enter the IP address: ")

    match option:
        case "1":
            lower = int(input("Enter the lower range of ports: "))
            upper = int(input("Enter the upper range of ports: "))

            for port in range(lower, upper):
                print(f"Scanning port {port}")

                if port_scanner(ip, port) == "The port is open":
                    print(f"Port {port} is open")

                else:
                    print(f"Port {port} is closed")
        
        case "2":
            port = int(input("Enter the port: "))
            print(port_scanner(ip, port))
        
        case _:
            print("Invalid option")
            main()
    


if __name__ == "__main__":
    main()